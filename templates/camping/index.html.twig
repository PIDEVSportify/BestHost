{% extends 'base.html.twig' %}

{% block title %}Hello CampingController!{% endblock %}

{% block body %}
    <main>
        <!--? slider Area Start -->
        <div class="slider-area ">
            <div class="slider-active">
                <!-- Single Slider -->
                <div class="single-slider slider-height d-flex align-items-center slide-bg">
                    <div class="container">
                        <div class="row justify-content-between align-items-center">
                            <div class="col-xl-8 col-lg-8 col-md-8 col-sm-8">
                                <div class="hero__caption">
                                    <h1 data-animation="fadeInLeft" data-delay=".4s" data-duration="2000ms">Life is best when you're camping</h1>
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-3 col-md-4 col-sm-4 d-none d-sm-block">
                                <div class="hero__img" data-animation="bounceIn" data-delay=".4s">

                                    <img src="{{ asset("assets/img/hero/victor-larracuente-JQfYGhUcDSg-unsplash.jpg")}}" alt="" class=" heartbeat" width="472" height="648">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- slider Area End-->
        <!-- ? New Product Start -->
        <div class="filtre">
            <div class="container">
                <div class="row">
                    <div class="col">
                        <form method="POST" action="{{ path('Afficher_front')}}" >
                            <div style="margin-left: 12%;margin-top: 3%;MARGIN-INLINE-START: AUTO;">
                                <input type="submit" value="Filtres" name="view" id="filtre" data-toggle="modal" class="btn-shadow dropdown-toggle btn btn-info test" data-target="#dataModal" style="background-color: #6c6a74;border-color: #dbdbdb;">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="mapboxgl-ctrl-geolocate" style="margin-top: 6%">
            <div class="container">
            <div class="row">
                <div class="col">
                    <button id = "find-me" class="btn btn-dark" onclick="geoFindMe()">Montrer ma localisation</button><br/>
                    <p id = "status"></p>
                    <a id = "map-link" target="_blank" style="color: black"></a>
                </div>
            </div>
            </div>

        </div>
        <section class="new-product-area section-padding30">
            <div class="container" style="margin-top: -7%">
                <!-- Section tittle -->
                <div class="row">
                    <div class="col-xl-12">
                        <div class="section-tittle mb-70">
                            <h2>New Arrivals</h2>
                        </div>
                    </div>
                </div>
                {% set index=0 %}
                <div class="row">
                    {% for fronts in liste %}
                    <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
                        <div class="single-new-pro mb-30 text-center">
                            <div class="product-img">
                                <img src="uploads/{{ fronts.getImageCamping() }}" alt="">
                            </div>
                            <div class="product-caption">
                                <h3><a href="product_details.html">{{ fronts.getTypeCamping() }}</a></h3>
                                <span>{{ fronts.getDescriptionCamping() }} </span>
                            </div>
                            {% if fronts.getRatingCamping()  %}
                                <iframe hidden onload="average({{(fronts.getAverageRating()/fronts.getRatingCamping())}},{{index}})" ></iframe>
                            {% else %}
                                <iframe hidden onload="average({{fronts.getAverageRating()}},{{index}})" ></iframe>
                            {% endif %}
                            <div style="margin-top: 15px" >
                                <form class="rating" >
                                <label id="11{{index}}" title="Poor" class="fa fa-star disabled" ></label>
                                <label id="22{{index}}" title="Average" class="fa fa-star disabled" ></label>
                                <label id="33{{index}}" title="Average" class="fa fa-star disabled" ></label>
                                <label id="44{{index}}" title="Good" class="fa fa-star disabled" ></label>
                                <label id="55{{index}}" title="Awesome" class="fa fa-star disabled" ></label>
                                    {% if fronts.getRatingCamping()  %}
                                    <p style="margin-left: 12px; color: #0066B4!important">{{(fronts.getAverageRating()/fronts.getRatingCamping())|number_format(1, '.', ',')}}  ({{fronts.getRatingCamping()}})</p>
                                    {% else %}
                                        <p style="margin-left: 12px; color: #0066B4!important">{{fronts.getAverageRating()|number_format(1, '.', ',')}}  ({{fronts.getRatingCamping()}})</p>
                                    {% endif %}
                                </form>
                            </div>
                            <div>
                                <button type="button" class="btn btn-dark" href="" data-toggle="modal" data-target="#createmodel{{index}}" style="margin-top: 12px; margin-right:80% " >Rate</button>
                                <div class="modal fade" id="createmodel{{index}}" tabindex="-1" role="dialog" aria-labelledby="createModalLabel" aria-hidden="true" style="padding-top: 100px">
                                    <div class="modal-dialog" role="document" style="max-width: 525px">
                                        <div class="modal-content">
                                            <form class="rating" method="POST" id="form{{index}}" action="{{ path('rating_camping') }}" >
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="createModalLabel"><i class="ti-marker-alt m-r-10"></i> Click to rate!</h5>
                                                </div>
                                                <div class="modal-body">
                                                    <input hidden id="id" type="number" value="{{ fronts.getId() }}" name="id_rate">
                                                    <input type="radio" id="rating1{{index}}" name="rating" value="1" onclick="rate1({{index}})">
                                                    <label id="1{{index}}" title="Poor" class="fa fa-star" for="rating1{{index}}"></label>
                                                    <input type="radio" id="rating2{{index}}" name="rating" value="2" onclick="rate2({{index}})">
                                                    <label id="2{{index}}" title="Average" class="fa fa-star" for="rating2{{index}}"></label>
                                                    <input type="radio" id="rating3{{index}}" name="rating" value="3" onclick="rate3({{index}})">
                                                    <label id="3{{index}}" title="Average" class="fa fa-star" for="rating3{{index}}"></label>
                                                    <input type="radio" id="rating4{{index}}" name="rating" value="4" onclick="rate4({{index}})">
                                                    <label id="4{{index}}" title="Good" class="fa fa-star" for="rating4{{index}}"></label>
                                                    <input type="radio" id="rating5{{index}}" name="rating" value="5" onclick="rate5({{index}})">
                                                    <label id="5{{index}}" title="Awesome" class="fa fa-star" for="rating5{{index}}"></label>
                                                    <div class="modal-footer">
                                                    </div>
                                                    <button type="submit" id="submit_rate" onclick="clean({{index}})" data-dismiss="modal">Close</button>
                                                    <button type="submit" id="submit_rate" form="form{{index}}" value="Submit">Rate</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            </div>
                        </div>
                        {% set index =index+1 %}
                    {% endfor %}
                    </div>
                    </div>
        </section>
        <div class="shop-method-area">
            <div class="container">
                <div class="method-wrapper">
                    <div class="row d-flex justify-content-between">
                        <div class="col-xl-4 col-lg-4 col-md-6">
                            <div class="single-method mb-40">
                                <i class="ti-unlock"></i>
                                <h6>Your privacy is our priority</h6>
                            </div>
                        </div>
                        <div class="col-xl-4 col-lg-4 col-md-6">
                            <div class="single-method mb-40">
                                <i class="ti-reload"></i>
                                <h6>Secure Payment System</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Shop Method End-->
    </main>
{% endblock %}
